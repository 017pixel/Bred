<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>

    <!-- Styles -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
        rel="stylesheet">
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Top Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-left">
            <button class="nav-button new-chat-button" id="newChatButton" title="Neuer Chat">
                <span class="material-symbols-outlined">add</span>
            </button>
        </div>
        <div class="nav-right">
            <button class="nav-button" id="historyButton" title="Verlauf">
                <span class="material-symbols-outlined">history</span>
            </button>
            <button class="nav-button" id="settingsButton" title="Einstellungen">
                <span class="material-symbols-outlined">settings</span>
            </button>
            <button class="nav-button account-button" id="accountButton" title="Profil">
                <span class="material-symbols-outlined">account_circle</span>
            </button>
        </div>
    </nav>

    <!-- API Key Banner (shown when no key) -->
    <div class="api-banner" id="apiBanner">
        <span class="material-symbols-outlined">key</span>
        <span>Bitte Gemini API-Key eingeben</span>
        <button class="banner-button" id="openSettingsBtn">Einrichten</button>
    </div>

    <!-- Messages Area -->
    <div class="chat-messages" id="chatMessages">
        <!-- Welcome Screen (always at top) -->
        <div class="welcome-container" id="welcomeScreen">
            <h1 class="welcome-title" id="welcomeTitle">Hallo,<br>bist du bereit,<br>alles zu erreichen?</h1>
            <div class="suggestions-grid">
                <button class="suggestion-card" data-prompt="Erkläre mir ">
                    <span class="material-symbols-outlined">lightbulb</span>
                    <span class="card-text">Erkläre mir...</span>
                </button>
                <button class="suggestion-card" data-prompt="Programmiere mir ">
                    <span class="material-symbols-outlined">code</span>
                    <span class="card-text">Programmiere mir...</span>
                </button>
                <button class="suggestion-card" data-prompt="Schreibe mir ">
                    <span class="material-symbols-outlined">edit_note</span>
                    <span class="card-text">Schreibe mir...</span>
                </button>
            </div>
        </div>

        <!-- Chat Area (messages appear here, below welcome screen) -->
        <div class="chat-area" id="chatArea"></div>
    </div>

    <!-- Input Area -->
    <div class="chat-input-container">
        <div class="input-row">
            <div class="chat-input-wrapper">
                <input type="text" id="messageInput" class="chat-input" placeholder="Nachricht eingeben..."
                    autocomplete="off">
                <button class="send-button" id="sendButton">
                    <span class="material-symbols-outlined">arrow_upward</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal settings-modal">
            <div class="modal-header">
                <h2>Einstellungen</h2>
                <button class="modal-close" id="closeModal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- API Key Section -->
                <div class="settings-section">
                    <h3 class="section-title">
                        <span class="material-symbols-outlined">key</span>
                        API-Konfiguration
                    </h3>
                    <label for="apiKeyInput">Gemini API-Key</label>
                    <div class="input-wrapper">
                        <input type="password" id="apiKeyInput" placeholder="API-Key hier eingeben..."
                            autocomplete="off">
                        <button class="toggle-visibility" id="toggleVisibility">
                            <span class="material-symbols-outlined">visibility</span>
                        </button>
                    </div>
                    <p class="hint">
                        <a href="https://aistudio.google.com/apikey" target="_blank">API-Key holen</a>
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" id="cancelButton">Abbrechen</button>
                <button class="modal-button primary" id="saveSettings">Speichern</button>
            </div>
        </div>
    </div>

    <!-- Account Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="modal account-modal">
            <div class="modal-header">
                <h2>Mein Profil</h2>
                <button class="modal-close" id="closeAccountModal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Profile Section -->
                <div class="settings-section">
                    <div class="section-header">
                        <h3 class="section-title">
                            <span class="material-symbols-outlined">person</span>
                            Personalisierung
                        </h3>
                        <div class="incognito-toggle">
                            <span class="incognito-label" id="incognitoLabel">
                                <span class="material-symbols-outlined incognito-icon"
                                    id="incognitoIcon">visibility</span>
                                <span id="incognitoText">Aktiv</span>
                            </span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="incognitoToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <p class="section-hint">Diese Infos werden dem Chatbot mitgeteilt, um personalisierte Antworten zu
                        geben.</p>

                    <div class="personalization-fields" id="personalizationFields">
                        <div class="field-group">
                            <label for="userName">
                                <span class="material-symbols-outlined">badge</span>
                                Dein Name
                            </label>
                            <input type="text" id="userName" class="settings-input" placeholder="Wie heißt du?">
                        </div>

                        <div class="field-group">
                            <label for="userHobbies">
                                <span class="material-symbols-outlined">interests</span>
                                Hobbys & Interessen
                            </label>
                            <textarea id="userHobbies" class="settings-textarea"
                                placeholder="Was machst du gerne? (z.B. Gaming, Musik, Sport...)"></textarea>
                        </div>

                        <div class="field-group">
                            <label for="userInstructions">
                                <span class="material-symbols-outlined">rule</span>
                                Anweisungen an den Chatbot
                            </label>
                            <textarea id="userInstructions" class="settings-textarea"
                                placeholder="Wie soll der Chatbot antworten? (z.B. Duze mich, sei humorvoll, antworte kurz...)"></textarea>
                        </div>

                        <div class="field-group">
                            <label for="userAbout">
                                <span class="material-symbols-outlined">info</span>
                                Weiteres über dich
                            </label>
                            <textarea id="userAbout" class="settings-textarea"
                                placeholder="Was sollte der Chatbot noch über dich wissen? (z.B. Beruf, Alter, Sprache...)"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary" id="cancelAccountButton">Abbrechen</button>
                <button class="modal-button primary" id="saveAccountSettings">Speichern</button>
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal-overlay" id="historyModal">
        <div class="modal history-modal">
            <div class="modal-header">
                <h2>Meine Chats</h2>
                <button class="modal-close" id="closeHistoryModal">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="chat-list" id="chatList">
                    <!-- Chat items will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
</body>

</html>